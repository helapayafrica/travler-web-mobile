<h3 class="text-center mb-2 fw-bold">{{ 'login.title' | translate }}</h3>

<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
  <!-- Code -->
  <label for="code">{{ 'login.labels.code' | translate }}</label>
  <p-select [options]="codes"
            formControlName="country_code"
            id="code"
            optionLabel="label"
            optionValue="value"
            placeholder="{{ 'login.placeholders.code' | translate }}"
            class="w-100 p-dropdown-sm">
  </p-select>
  <small *ngIf="loginForm.get('country_code')?.touched && loginForm.get('country_code')?.errors?.['required']"
         class="text-danger">
    {{ 'login.validation.codeRequired' | translate }}
  </small>

  <!-- Phone Number -->
  <label for="phone">{{ 'login.labels.phoneNumber' | translate }}</label>
  <input formControlName="phone_number"
         id="phone"
         type="tel"
         class="w-100 form-control p-2"
         inputmode="tel"
         placeholder="{{ 'login.placeholders.phoneNumber' | translate }}"
         pattern="^\+?[0-9\s\-]{7,15}$">
  <small *ngIf="loginForm.get('phone_number')?.touched && loginForm.get('phone_number')?.errors?.['required']"
         class="text-danger">
    {{ 'login.validation.phoneRequired' | translate }}
  </small>

  <!-- Password -->
  <label for="password">{{ 'login.labels.password' | translate }}</label>
  <p-password formControlName="password"
              inputId="password"
              [feedback]="false"
              [toggleMask]="true"
              inputStyleClass="w-100 form-control"
              placeholder="{{ 'login.placeholders.password' | translate }}">
  </p-password>
  <small *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.errors?.['required']"
         class="text-danger">
    {{ 'login.validation.passwordRequired' | translate }}
  </small>
  <small *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.errors?.['minlength']"
         class="text-danger">
    {{ 'login.validation.passwordMinLength' | translate }}
  </small>

  <!-- Remember Me + Forgot Password -->
  <p-checkbox inputId="rememberMe" formControlName="rememberMe" binary="true"></p-checkbox>
  <label for="rememberMe">{{ 'login.labels.rememberMe' | translate }}</label>
  <a href="#" class="text-decoration-none float-end">{{ 'login.labels.forgotPassword' | translate }}</a>

  <!-- Submit -->
  <button type="submit"
          class="w-100 rounded-pill p-2 bg-primary text-white"
          [disabled]="loginForm.invalid || isSubmitting">
    <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2"></span>
    {{ isSubmitting ? ('login.buttons.loggingIn' | translate) : ('login.buttons.signIn' | translate) }}
  </button>

  <!-- Signup link -->
  <div class="text-center mt-3">
    <p class="mb-0">
      {{ 'login.labels.signUpLink' | translate }}
      <a routerLink="/sign-up" class="link-underline"></a>
    </p>
  </div>
</form>
