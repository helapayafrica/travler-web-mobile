import{a as T}from"./chunk-3HZLL5PW.js";import{i as _}from"./chunk-P4NI4DP4.js";import"./chunk-4KXBBMTD.js";import"./chunk-5MO6MPKA.js";import"./chunk-VBQ6VRJ5.js";import"./chunk-DNQPFKDS.js";import"./chunk-6THMQCJO.js";import"./chunk-BA5OYKA4.js";import"./chunk-JPC3RVDF.js";import"./chunk-MK3S6FXP.js";import"./chunk-IOPHG2KH.js";import"./chunk-H4ZN6NX2.js";import"./chunk-VXBX3H4W.js";import"./chunk-D5BAB7TU.js";import"./chunk-D3BB2YUO.js";import"./chunk-ZRTNA5AZ.js";import"./chunk-ZGVWO2O4.js";import"./chunk-NMHFSZUN.js";import"./chunk-4QCEHMDE.js";import{a as E}from"./chunk-LF2IBCJR.js";import"./chunk-KLFOQ2RT.js";import{A as F,B as I,c as S,d as f,f as k,g as B,h as w,j as g,l as D,p as y,q as C}from"./chunk-RAZRMRQX.js";import"./chunk-7UZYWCAJ.js";import"./chunk-6LBJZWJB.js";import"./chunk-GPQBVM7U.js";import{c as x}from"./chunk-35RUP4P6.js";import{Ic as r,Jc as o,Ob as p,Pb as t,Qb as i,Rb as s,_a as e,bc as v,ea as c,qb as b,rc as n,sc as d,tc as u}from"./chunk-45NCVV7C.js";import"./chunk-TWZW5B45.js";var N=class h{backendService=c(E);toastr=c(T);rescheduleForm;ngOnInit(){this.rescheduleForm=new w({ticket:new g("",f.required),newDate:new g("",f.required)})}isLoading=!0;buses=[];onSubmit(){console.log(this.rescheduleForm.value),this.backendService.rescheduleTicket(this.rescheduleForm.value).subscribe({next:a=>{console.log(a);let l=a.data.departure_date;this.checkDate(l)?console.log("['Reschedule Success']",a):this.toastr.error("Rescheduling is only allowed for trips departing more than 8 hours from now.","Cannot Reschedule")},error:a=>console.error("Error rescheduling ticket:",a)})}checkDate(a){let l=new Date(a),m=new Date;return(l.getTime()-m.getTime())/(1e3*60*60)>=8}static \u0275fac=function(l){return new(l||h)};static \u0275cmp=b({type:h,selectors:[["app-reschedule"]],decls:43,vars:33,consts:[[1,"app-container"],[1,"container"],[1,"card","p-3","mb-4","rounded"],[1,"card-title"],[1,"bg-warning-subtle","border-1","border-warning","rounded-3","p-3","mb-4"],[1,"d-flex","align-items-center"],[1,"bi","bi-info-circle-fill","text-warning","fs-3","me-3"],[1,"mb-1","fw-bold"],[1,"mb-0","fs-6"],[1,"fw-bold","text-uppercase"],[1,"fw-semibold"],[1,"fs-5","text-muted","mb-1"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","currentDate",1,"form-label"],["type","text","id","currentDate","formControlName","ticket",1,"form-control",3,"placeholder"],["for","newDate",1,"form-label"],["type","date","id","newDate","formControlName","newDate",1,"form-control"],["type","submit",1,"btn","btn-primary","px-4","py-2","rounded-pill","mt-4","text-end"],[2,"min-height","50vh"],[3,"isLoading","data"]],template:function(l,m){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),n(4),r(5,"translate"),i(),t(6,"div",4)(7,"div",5),s(8,"i",6),t(9,"div")(10,"h5",7),n(11),r(12,"translate"),i(),t(13,"p",8),n(14),r(15,"translate"),t(16,"span",9),n(17),r(18,"translate"),i(),n(19,". "),t(20,"span",10),n(21),r(22,"translate"),i()()()()(),t(23,"p",11),n(24),r(25,"translate"),i(),t(26,"form",12),v("ngSubmit",function(){return m.onSubmit()}),t(27,"div",13)(28,"label",14),n(29),r(30,"translate"),i(),s(31,"input",15),r(32,"translate"),i(),t(33,"div",13)(34,"label",16),n(35),r(36,"translate"),i(),s(37,"input",17),i(),t(38,"button",18),n(39),r(40,"translate"),i()()(),t(41,"div",19),s(42,"app-search-results",20),i()()()),l&2&&(e(4),d(o(5,13,"rescheduleBooking.title")),e(7),d(o(12,15,"rescheduleBooking.note.title")),e(3),u(" ",o(15,17,"rescheduleBooking.note.infoText")," "),e(3),d(o(18,19,"rescheduleBooking.note.timeCondition")),e(4),d(o(22,21,"rescheduleBooking.note.details")),e(3),d(o(25,23,"rescheduleBooking.selectDateText")),e(2),p("formGroup",m.rescheduleForm),e(3),d(o(30,25,"rescheduleBooking.form.ticketLabel")),e(2),p("placeholder",o(32,27,"rescheduleBooking.form.ticketPlaceholder")),e(4),d(o(36,29,"rescheduleBooking.form.newDateLabel")),e(4),u(" ",o(40,31,"rescheduleBooking.form.submitButton")," "),e(3),p("isLoading",m.isLoading)("data",m.buses))},dependencies:[F,D,S,k,B,I,y,C,_,x],styles:[".btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--primary-color-500),var(--primary-color-400));border:var(--primary-color-500)}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{font-weight:500;font-size:1.1rem;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{height:32px!important}"]})};export{N as Reschedule};
