import{b as z}from"./chunk-MRT37FHK.js";import{a as U}from"./chunk-JPC3RVDF.js";import{h as S,l as $}from"./chunk-NMHFSZUN.js";import{a as L}from"./chunk-LF2IBCJR.js";import{A as R,B as A,c as F,d as v,f as N,g as I,h as V,j as b,l as E,p as j,q as D,r as T,s as q,t as B,y as G}from"./chunk-RAZRMRQX.js";import{j as x,k as y}from"./chunk-GPQBVM7U.js";import{c as k}from"./chunk-35RUP4P6.js";import{Ic as p,Jc as m,Ob as c,Pb as a,Qb as n,Rb as M,_a as t,bc as O,ea as g,qb as C,rc as d,sc as f,tc as _,wb as u,zc as h}from"./chunk-45NCVV7C.js";import{a as w,b as P,h as Q}from"./chunk-TWZW5B45.js";var J=Q(U());function W(o,s){if(o&1&&(a(0,"option",21),d(1),n()),o&2){let r=s.$implicit;c("value",r)("ngValue",r.value),t(),f(r.label)}}function X(o,s){o&1&&(a(0,"small",22),d(1),p(2,"translate"),n()),o&2&&(t(),_(" ",m(2,1,"login.validation.codeRequired")," "))}function Y(o,s){o&1&&(a(0,"small",22),d(1),p(2,"translate"),n()),o&2&&(t(),_(" ",m(2,1,"login.validation.phoneRequired")," "))}var H=class o{bookingService=g($);ngOnInit(){this.form=new V({country_code:new b("",v.required),phone:new b("",v.required)}),this.form.patchValue({country_code:[this.codes[0].value]})}codes=[{value:"254",label:"+254"},{value:"255",label:"+255"},{value:"256",label:"+256"},{value:"250",label:"+250"}];form;backendService=g(L);modalService=g(z);onSubmit(){if(console.log(this.form.value),this.form.invalid){this.form.markAllAsTouched();return}let s=this.form.controls.country_code.value,r=this.form.controls.phone.value.replace(/^0+/,"").trim(),i=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),l={country_code:s,phone:r,device_number:i};this.backendService.forgotPassword(l).subscribe({next:e=>{if(console.log(e),e.isSuccess){let K=P(w({},l),{verification_key:Number(e.verification_key),date:new Date});this.bookingService.setConfig("forgotPasswordDetails",K),this.modalService.openModal("forgotPasswordVerificationModal")}else J.default.fire({icon:"error",title:"Verification",text:e.errors.otp[0],timer:3e3,width:"350px",customClass:{popup:"tiny-swal",icon:"tiny-icon"}})},error:e=>{},complete:()=>{}})}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=C({type:o,selectors:[["app-forgot-password"]],decls:30,vars:12,consts:[[1,"app-container"],[1,"forgot-password-container"],[1,"row"],[1,"col-12"],[1,"background-color","shadow-sm","p-4","rounded"],[1,"fw-semibold","fs-4"],[1,"mt-5",3,"ngSubmit","formGroup"],[1,"row","g-4"],[1,"mt-2","col-12"],[1,"d-flex","flex-column","gap-1"],["for","phone"],[1,"input-group","joined-inputs"],["formControlName","country_code",1,"form-select","w-auto",2,"max-width","100px"],[3,"value","ngValue",4,"ngFor","ngForOf"],["formControlName","phone","id","phone","type","tel","inputmode","tel","pattern","^\\+?[0-9\\s\\-]{7,15}$",1,"form-control",3,"placeholder"],["class","text-danger",4,"ngIf"],[1,"col-12","mt-2"],[1,"d-flex","align-content-end"],[1,"text-end","w-100"],["routerLink","/login",1,"link-underline"],[1,"btn","btn-primary","rounded-pill","w-100",3,"disabled"],[3,"value","ngValue"],[1,"text-danger"]],template:function(r,i){if(r&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"p",5),d(7," Forgot Password "),n()(),a(8,"form",6),O("ngSubmit",function(){return i.onSubmit()}),a(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),d(13),p(14,"translate"),n(),a(15,"div",11)(16,"select",12),u(17,W,2,3,"option",13),n(),M(18,"input",14),p(19,"translate"),n(),u(20,X,3,3,"small",15)(21,Y,3,3,"small",15),n()(),a(22,"div",16)(23,"div",17)(24,"div",18)(25,"p",19),d(26," Sign in "),n()()()(),a(27,"div",8)(28,"button",20),d(29," Request OTP "),n()()()()()()()()()),r&2){let l,e;t(8),c("formGroup",i.form),t(5),f(m(14,8,"login.labels.phoneNumber")),t(4),c("ngForOf",i.codes),t(),c("placeholder",h(m(19,10,"login.placeholders.phoneNumber"))),t(2),c("ngIf",((l=i.form.get("country_code"))==null?null:l.touched)&&((l=i.form.get("country_code"))==null||l.errors==null?null:l.errors.required)),t(),c("ngIf",((e=i.form.get("phone"))==null?null:e.touched)&&((e=i.form.get("phone"))==null||e.errors==null?null:e.errors.required)),t(7),c("disabled",i.form.invalid)}},dependencies:[y,A,E,q,B,F,T,N,I,G,j,D,R,S,x,k],styles:[".forgot-password-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;border-radius:6px;padding:1rem}.forgot-password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .forgot-password-container[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .forgot-password-container[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{border:1px solid #ddd;background-color:#f5f5f5;box-shadow:inset 5px 5px 10px -5px #cdcdcd66;transition:border-color .2s ease,background-color .2s ease}.forgot-password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .forgot-password-container[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color-400);background-color:#fff;box-shadow:0 0 4px rgba(var(--primary-color-500-rgb),.3)}.forgot-password-container[_ngcontent-%COMP%]   .joined-inputs[_ngcontent-%COMP%]{display:flex;align-items:stretch}.forgot-password-container[_ngcontent-%COMP%]   .joined-inputs[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.forgot-password-container[_ngcontent-%COMP%]   .joined-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}.forgot-password-container[_ngcontent-%COMP%]   .joined-inputs[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .forgot-password-container[_ngcontent-%COMP%]   .joined-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#f5f5f5}.forgot-password-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:.4rem}.forgot-password-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--primary-color-500),var(--primary-color-400));color:var(--primary-color-100);border:1px solid var(--primary-color-500);font-weight:500;padding:.7rem}.forgot-password-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6}.forgot-password-container[_ngcontent-%COMP%]   .link-underline[_ngcontent-%COMP%]{color:var(--primary-color-500);text-decoration:underline;cursor:pointer}.forgot-password-container[_ngcontent-%COMP%]   .link-underline[_ngcontent-%COMP%]:hover{text-decoration:none}.background-color[_ngcontent-%COMP%]{background-color:#fff}@media (max-width: 768px){.forgot-password-container[_ngcontent-%COMP%]{padding:1.5rem}.joined-inputs[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{max-width:80px}}"]})};export{H as a};
