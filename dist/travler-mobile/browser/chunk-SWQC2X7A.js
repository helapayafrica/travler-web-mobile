import{a as j}from"./chunk-CBO7K72Y.js";import{a as H}from"./chunk-JPC3RVDF.js";import{g as R,l as V}from"./chunk-NMHFSZUN.js";import{a as D}from"./chunk-LF2IBCJR.js";import{B as q,d as v,f as E,g as O,l as N,p as L,q as T,z as G}from"./chunk-RAZRMRQX.js";import{i as M,k as I}from"./chunk-GPQBVM7U.js";import{c as B}from"./chunk-35RUP4P6.js";import{Dc as x,Ic as s,Jc as a,Ob as p,Pb as d,Qb as i,Rb as b,_a as o,bc as S,dc as _,ea as P,lb as C,qb as k,rc as c,tc as m,wb as w}from"./chunk-45NCVV7C.js";import{a as y,b as F,h as Y}from"./chunk-TWZW5B45.js";var h=Y(H());var z=r=>({"ng-invalid ng-dirty":r});function J(r,t){r&1&&(d(0,"span"),c(1),s(2,"translate"),i()),r&2&&(o(),m(" ",a(2,1,"changePassword.errors.newPasswordRequired")," "))}function K(r,t){r&1&&(d(0,"span"),c(1),s(2,"translate"),i()),r&2&&(o(),m(" ",a(2,1,"changePassword.errors.newPasswordMinLength")," "))}function Q(r,t){if(r&1&&(d(0,"div",16),w(1,J,3,3,"span",17)(2,K,3,3,"span",17),i()),r&2){let n,e,l=_();o(),p("ngIf",(n=l.passwordForm.get("newPassword"))==null||n.errors==null?null:n.errors.required),o(),p("ngIf",(e=l.passwordForm.get("newPassword"))==null||e.errors==null?null:e.errors.minlength)}}function U(r,t){r&1&&(d(0,"span"),c(1),s(2,"translate"),i()),r&2&&(o(),m(" ",a(2,1,"changePassword.errors.confirmPasswordRequired")," "))}function W(r,t){r&1&&(d(0,"span"),c(1),s(2,"translate"),i()),r&2&&(o(),m(" ",a(2,1,"changePassword.errors.passwordMismatch")," "))}function X(r,t){if(r&1&&(d(0,"div",16),w(1,U,3,3,"span",17)(2,W,3,3,"span",17),i()),r&2){let n,e,l=_();o(),p("ngIf",(n=l.passwordForm.get("confirmPassword"))==null||n.errors==null?null:n.errors.required),o(),p("ngIf",(e=l.passwordForm.get("confirmPassword"))==null||e.errors==null?null:e.errors.mismatch)}}var A=class r{constructor(t){this.fb=t;this.passwordForm=this.fb.group({newPassword:["",[v.required,v.minLength(8)]],confirmPassword:["",[v.required]]},{validators:this.passwordMatchValidator})}passwordForm;passwordMatchValidator(t){let n=t.get("newPassword")?.value,e=t.get("confirmPassword")?.value;return n!==e?(t.get("confirmPassword")?.setErrors({mismatch:!0}),{mismatch:!0}):null}bookingService=P(V);router=P(R);backend=P(D);onSubmit(){if(this.passwordForm.valid){console.log("Password change submitted",this.passwordForm.value);let t=this.bookingService.getConfig("forgotPasswordDetails");t||this.router.navigate(["/login"]);let n=F(y({},this.passwordForm.value),{phone:t.phone,country_code:t.country_code,sourcetype:"web"});this.backend.resetPassword(n).subscribe({next:e=>{e.isSuccess==!0?(h.default.fire({icon:"success",title:"Reset success password",text:"Your password has been reset",timer:3e3,width:"350px",customClass:{popup:"tiny-swal",icon:"tiny-icon"}}),this.router.navigate(["/login"]),this.bookingService.setConfig("forgotPasswordDetails",{})):h.default.fire({icon:"error",title:"Verification",text:e.msg,timer:3e3,width:"350px",customClass:{popup:"tiny-swal",icon:"tiny-icon"}})},error:e=>{h.default.fire({icon:"error",title:"Verification",text:"Reset Failed",timer:3e3,width:"350px",customClass:{popup:"tiny-swal",icon:"tiny-icon"}})},complete:()=>{console.log("complete change password")}})}else Object.keys(this.passwordForm.controls).forEach(t=>{this.passwordForm.get(t)?.markAsTouched()})}static \u0275fac=function(n){return new(n||r)(C(G))};static \u0275cmp=k({type:r,selectors:[["app-reset-password"]],decls:32,vars:38,consts:[[1,"app-container"],[1,"row","container"],[1,"col-12"],[1,"background-color","shadow-sm","p-4","rounded-3"],[1,"fw-semibold","fs-4"],[3,"ngSubmit","formGroup"],[1,"row","align-items-end","gy-3"],[1,"col-12","col-md-4","col-lg-3"],[1,"d-flex","flex-column"],["for","newPassword",1,"form-label"],["inputId","newPassword","formControlName","newPassword","inputStyleClass","w-100 form-control",3,"feedback","toggleMask","promptLabel","weakLabel","mediumLabel","strongLabel","placeholder","ngClass"],["class","invalid-feedback d-block",4,"ngIf"],[1,"flex-column","d-flex"],["for","confirmPassword",1,"form-label"],["inputId","confirmPassword","formControlName","confirmPassword","inputStyleClass","w-100 form-control",3,"feedback","toggleMask","placeholder","ngClass"],["type","submit",1,"btn","btn-primary","rounded-pill",3,"disabled"],[1,"invalid-feedback","d-block"],[4,"ngIf"]],template:function(n,e){if(n&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"p",4),c(6," Reset Password "),i()(),d(7,"form",5),S("ngSubmit",function(){return e.onSubmit()}),d(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),c(12),s(13,"translate"),i(),b(14,"p-password",10),s(15,"translate"),s(16,"translate"),s(17,"translate"),s(18,"translate"),s(19,"translate"),w(20,Q,3,2,"div",11),i()(),d(21,"div",7)(22,"div",12)(23,"label",13),c(24),s(25,"translate"),i(),b(26,"p-password",14),s(27,"translate"),w(28,X,3,2,"div",11),i()(),d(29,"div",7)(30,"button",15),c(31," Reset Password "),i()()()()()()()()),n&2){let l,u,g,f;o(7),p("formGroup",e.passwordForm),o(5),m(" ",a(13,18,"changePassword.labels.newPassword"),": "),o(2),p("feedback",!0)("toggleMask",!0)("promptLabel",a(15,20,"changePassword.prompts.enterPassword"))("weakLabel",a(16,22,"changePassword.prompts.weak"))("mediumLabel",a(17,24,"changePassword.prompts.medium"))("strongLabel",a(18,26,"changePassword.prompts.strong"))("placeholder",a(19,28,"changePassword.placeholders.newPassword"))("ngClass",x(34,z,((l=e.passwordForm.get("newPassword"))==null?null:l.invalid)&&((l=e.passwordForm.get("newPassword"))==null?null:l.touched))),o(6),p("ngIf",((u=e.passwordForm.get("newPassword"))==null?null:u.invalid)&&((u=e.passwordForm.get("newPassword"))==null?null:u.touched)),o(4),m(" ",a(25,30,"changePassword.labels.confirmPassword"),": "),o(2),p("feedback",!1)("toggleMask",!0)("placeholder",a(27,32,"changePassword.placeholders.confirmPassword"))("ngClass",x(36,z,((g=e.passwordForm.get("confirmPassword"))==null?null:g.invalid)&&((g=e.passwordForm.get("confirmPassword"))==null?null:g.touched))),o(2),p("ngIf",((f=e.passwordForm.get("confirmPassword"))==null?null:f.invalid)&&((f=e.passwordForm.get("confirmPassword"))==null?null:f.touched)),o(2),p("disabled",e.passwordForm.invalid)}},dependencies:[I,j,q,N,E,O,L,T,M,B],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.change-password-container[_ngcontent-%COMP%]{max-width:600px;background-color:#efefef;border-radius:6px;padding:1rem}.change-password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:.375rem;padding:.75rem;box-shadow:5px 5px 10px -5px #cdcdcd inset;-webkit-box-shadow:5px 5px 10px -5px #cdcdcd inset;-moz-box-shadow:5px 5px 10px -5px #cdcdcd inset}.change-password-container[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem;color:#333}.change-password-container[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{padding:.6rem 0;font-weight:500}@media (max-width: 768px){.change-password-container[_ngcontent-%COMP%]{padding:1.5rem}}.background-color[_ngcontent-%COMP%]{background:#fff}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--primary-color-500),var(--primary-color-400));color:var(--primary-color-100);border:1px solid var(--primary-color-500)}"]})};export{A as a};
