import{g as k,l as x}from"./chunk-NMHFSZUN.js";import{z as S}from"./chunk-GPQBVM7U.js";import{$ as l,Fa as v,da as p,ea as d,g as m,pa as b,ua as I}from"./chunk-45NCVV7C.js";var j=(()=>{let t=class t{constructor(e,o){this.document=e,this.platformId=o,this.documentIsAccessible=S(this.platformId)}static getCookieRegExp(e){let o=e.replace(/([[\]{}()|=;+?,.*^$\\])/gi,"\\$1");return new RegExp("(?:^"+o+"|;\\s*"+o+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),t.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.check(e)){e=encodeURIComponent(e);let s=t.getCookieRegExp(e).exec(this.document.cookie);return s?.[1]?t.safeDecodeURIComponent(s[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},o=this.document;return o.cookie&&o.cookie!==""&&o.cookie.split(";").forEach(s=>{let[c,r]=s.split("=");e[t.safeDecodeURIComponent(c.replace(/^ /,""))]=t.safeDecodeURIComponent(r)}),e}set(e,o,s,c,r,u,h,U){if(!this.documentIsAccessible)return;if(typeof s=="number"||s instanceof Date||c||r||u||h){let f={expires:s,path:c,domain:r,secure:u,sameSite:h||"Lax",partitioned:U};this.set(e,o,f);return}let a=encodeURIComponent(e)+"="+encodeURIComponent(o)+";",i=s||{};if(i.expires)if(typeof i.expires=="number"){let f=new Date(new Date().getTime()+i.expires*1e3*60*60*24);a+="expires="+f.toUTCString()+";"}else a+="expires="+i.expires.toUTCString()+";";i.path&&(a+="path="+i.path+";"),i.domain&&(a+="domain="+i.domain+";"),i.secure===!1&&i.sameSite==="None"&&(i.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),i.secure&&(a+="secure;"),i.sameSite||(i.sameSite="Lax"),a+="sameSite="+i.sameSite+";",i.partitioned&&(a+="Partitioned;"),this.document.cookie=a}delete(e,o,s,c,r="Lax"){if(!this.documentIsAccessible)return;let u=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:u,path:o,domain:s,secure:c,sameSite:r})}deleteAll(e,o,s,c="Lax"){if(!this.documentIsAccessible)return;let r=this.getAll();for(let u in r)r.hasOwnProperty(u)&&this.delete(u,e,o,s,c)}};t.\u0275fac=function(o){return new(o||t)(p(b),p(v))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var C=class n{loggedInKey="loggedInStatus";userKey="userData";loggedInSubject;userSubject;cookies=d(j);bookingsService=d(x);constructor(){let t=this.bookingsService.getConfig(this.loggedInKey);this.loggedInSubject=new m(t==="true");let g=null;if(this.userKey){let e=this.bookingsService.getConfig(this.userKey)}this.userSubject=new m(g)}get isLoggedIn$(){return this.loggedInSubject.asObservable()}get user$(){return this.userSubject.asObservable()}login(t){this.bookingsService.setConfig(this.loggedInKey,"true"),this.bookingsService.setConfig(this.userKey,t),console.log(t),this.cookies.set("userEmail",t.email,{expires:7,secure:!0,sameSite:"Strict"}),this.loggedInSubject.next(!0),this.userSubject.next(t)}logout(){this.bookingsService.removeConfig(this.loggedInKey),this.bookingsService.removeConfig(this.userKey),this.loggedInSubject.next(!1),this.userSubject.next(null)}getCurrentUser(){return this.userSubject.value}static \u0275fac=function(g){return new(g||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};var R=class n{currentUrl="/";router=d(k);modalInstance;isLoginRequired=I(!1);register(t){this.modalInstance=t}openModal(t){this.modalInstance&&(this.currentUrl=t,this.modalInstance.openModal())}navigateToUrl(){this.router.navigate([this.currentUrl])}static \u0275fac=function(g){return new(g||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};export{C as a,R as b};
