import{a as j}from"./chunk-CBO7K72Y.js";import{a as H}from"./chunk-JPC3RVDF.js";import"./chunk-H4ZN6NX2.js";import"./chunk-ZGVWO2O4.js";import{a as V}from"./chunk-LF2IBCJR.js";import"./chunk-KLFOQ2RT.js";import{B as R,d as u,f as O,g as T,l as L,p as q,q as G,z as D}from"./chunk-RAZRMRQX.js";import"./chunk-7UZYWCAJ.js";import"./chunk-6LBJZWJB.js";import{i as M,k as B,v as E}from"./chunk-GPQBVM7U.js";import{c as N}from"./chunk-35RUP4P6.js";import{Dc as _,Ic as t,Jc as a,Ob as d,Pb as l,Qb as i,Rb as b,_a as r,bc as I,dc as C,ea as y,lb as k,qb as S,rc as m,tc as c,wb as w}from"./chunk-45NCVV7C.js";import{h as A}from"./chunk-TWZW5B45.js";var F=A(H());var x=e=>({"ng-invalid ng-dirty":e});function J(e,n){e&1&&(l(0,"div",17),m(1),t(2,"translate"),i()),e&2&&(r(),c(" ",a(2,1,"changePassword.errors.oldPasswordRequired")," "))}function K(e,n){e&1&&(l(0,"span"),m(1),t(2,"translate"),i()),e&2&&(r(),c(" ",a(2,1,"changePassword.errors.newPasswordRequired")," "))}function Q(e,n){e&1&&(l(0,"span"),m(1),t(2,"translate"),i()),e&2&&(r(),c(" ",a(2,1,"changePassword.errors.newPasswordMinLength")," "))}function U(e,n){if(e&1&&(l(0,"div",17),w(1,K,3,3,"span",18)(2,Q,3,3,"span",18),i()),e&2){let s,o,p=C();r(),d("ngIf",(s=p.passwordForm.get("newPassword"))==null||s.errors==null?null:s.errors.required),r(),d("ngIf",(o=p.passwordForm.get("newPassword"))==null||o.errors==null?null:o.errors.minlength)}}function W(e,n){e&1&&(l(0,"span"),m(1),t(2,"translate"),i()),e&2&&(r(),c(" ",a(2,1,"changePassword.errors.confirmPasswordRequired")," "))}function X(e,n){e&1&&(l(0,"span"),m(1),t(2,"translate"),i()),e&2&&(r(),c(" ",a(2,1,"changePassword.errors.passwordMismatch")," "))}function Y(e,n){if(e&1&&(l(0,"div",17),w(1,W,3,3,"span",18)(2,X,3,3,"span",18),i()),e&2){let s,o,p=C();r(),d("ngIf",(s=p.passwordForm.get("confirmPassword"))==null||s.errors==null?null:s.errors.required),r(),d("ngIf",(o=p.passwordForm.get("confirmPassword"))==null||o.errors==null?null:o.errors.mismatch)}}var z=class e{constructor(n){this.fb=n;this.passwordForm=this.fb.group({oldPassword:["",[u.required]],newPassword:["",[u.required,u.minLength(8)]],confirmPassword:["",[u.required]]},{validators:this.passwordMatchValidator})}passwordForm;passwordMatchValidator(n){let s=n.get("newPassword")?.value,o=n.get("confirmPassword")?.value;return s!==o?(n.get("confirmPassword")?.setErrors({mismatch:!0}),{mismatch:!0}):null}backend=y(V);onSubmit(){this.passwordForm.valid?(console.log("Password change submitted",this.passwordForm.value),this.backend.changePassword(this.passwordForm.value).subscribe({next:n=>{n.isSuccess==!0?(F.default.fire({icon:"success",title:"Password change Success",text:n.msg,timer:3e3,width:"350px",customClass:{popup:"tiny-swal",icon:"tiny-icon"}}),this.passwordForm.reset()):F.default.fire({icon:"error",title:"Failed",text:n.msg,timer:3e3,width:"350px",customClass:{popup:"tiny-swal",icon:"tiny-icon"}})},error:n=>{console.log(n)},complete:()=>{console.log("complete change password")}})):Object.keys(this.passwordForm.controls).forEach(n=>{this.passwordForm.get(n)?.markAsTouched()})}static \u0275fac=function(s){return new(s||e)(k(D))};static \u0275cmp=S({type:e,selectors:[["app-view-user-profile-change-password"]],decls:41,vars:56,consts:[[1,"row"],[1,"col-12"],[1,"background-color","shadow-sm","p-4","rounded-3"],[1,"fw-semibold","fs-4"],[3,"ngSubmit","formGroup"],[1,"row","align-items-end","gy-3"],[1,"col-12","col-md-4","col-lg-3"],[1,"d-flex","flex-column"],["for","oldPassword",1,"form-label"],["inputId","oldPassword","formControlName","oldPassword","inputStyleClass","w-100 form-control",3,"feedback","toggleMask","placeholder","ngClass"],["class","invalid-feedback d-block",4,"ngIf"],["for","newPassword",1,"form-label"],["inputId","newPassword","formControlName","newPassword","inputStyleClass","w-100 form-control",3,"feedback","toggleMask","promptLabel","weakLabel","mediumLabel","strongLabel","placeholder","ngClass"],[1,"flex-column","d-flex"],["for","confirmPassword",1,"form-label"],["inputId","confirmPassword","formControlName","confirmPassword","inputStyleClass","w-100 form-control",3,"feedback","toggleMask","placeholder","ngClass"],["type","submit",1,"btn","btn-primary","rounded-pill",3,"disabled"],[1,"invalid-feedback","d-block"],[4,"ngIf"]],template:function(s,o){if(s&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"p",3),m(5),t(6,"translate"),i()(),l(7,"form",4),I("ngSubmit",function(){return o.onSubmit()}),l(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),m(12),t(13,"translate"),i(),b(14,"p-password",9),t(15,"translate"),w(16,J,3,3,"div",10),i()(),l(17,"div",6)(18,"div",7)(19,"label",11),m(20),t(21,"translate"),i(),b(22,"p-password",12),t(23,"translate"),t(24,"translate"),t(25,"translate"),t(26,"translate"),t(27,"translate"),w(28,U,3,2,"div",10),i()(),l(29,"div",6)(30,"div",13)(31,"label",14),m(32),t(33,"translate"),i(),b(34,"p-password",15),t(35,"translate"),w(36,Y,3,2,"div",10),i()(),l(37,"div",6)(38,"button",16),m(39),t(40,"translate"),i()()()()()()()),s&2){let p,g,f,P,h,v;r(5),c(" ",a(6,26,"changePassword.title")," "),r(2),d("formGroup",o.passwordForm),r(5),c(" ",a(13,28,"changePassword.labels.oldPassword"),": "),r(2),d("feedback",!1)("toggleMask",!0)("placeholder",a(15,30,"changePassword.placeholders.oldPassword"))("ngClass",_(50,x,((p=o.passwordForm.get("oldPassword"))==null?null:p.invalid)&&((p=o.passwordForm.get("oldPassword"))==null?null:p.touched))),r(2),d("ngIf",((g=o.passwordForm.get("oldPassword"))==null?null:g.invalid)&&((g=o.passwordForm.get("oldPassword"))==null?null:g.touched)),r(4),c(" ",a(21,32,"changePassword.labels.newPassword"),": "),r(2),d("feedback",!0)("toggleMask",!0)("promptLabel",a(23,34,"changePassword.prompts.enterPassword"))("weakLabel",a(24,36,"changePassword.prompts.weak"))("mediumLabel",a(25,38,"changePassword.prompts.medium"))("strongLabel",a(26,40,"changePassword.prompts.strong"))("placeholder",a(27,42,"changePassword.placeholders.newPassword"))("ngClass",_(52,x,((f=o.passwordForm.get("newPassword"))==null?null:f.invalid)&&((f=o.passwordForm.get("newPassword"))==null?null:f.touched))),r(6),d("ngIf",((P=o.passwordForm.get("newPassword"))==null?null:P.invalid)&&((P=o.passwordForm.get("newPassword"))==null?null:P.touched)),r(4),c(" ",a(33,44,"changePassword.labels.confirmPassword"),": "),r(2),d("feedback",!1)("toggleMask",!0)("placeholder",a(35,46,"changePassword.placeholders.confirmPassword"))("ngClass",_(54,x,((h=o.passwordForm.get("confirmPassword"))==null?null:h.invalid)&&((h=o.passwordForm.get("confirmPassword"))==null?null:h.touched))),r(2),d("ngIf",((v=o.passwordForm.get("confirmPassword"))==null?null:v.invalid)&&((v=o.passwordForm.get("confirmPassword"))==null?null:v.touched)),r(2),d("disabled",o.passwordForm.invalid),r(),c(" ",a(40,48,"changePassword.buttons.submit")," ")}},dependencies:[E,M,B,R,L,O,T,q,G,j,N],styles:[".change-password-container[_ngcontent-%COMP%]{max-width:600px;background-color:#efefef;border-radius:6px;padding:1rem}.change-password-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:.375rem;padding:.75rem;box-shadow:5px 5px 10px -5px #cdcdcd inset;-webkit-box-shadow:5px 5px 10px -5px #cdcdcd inset;-moz-box-shadow:5px 5px 10px -5px #cdcdcd inset}.change-password-container[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem;color:#333}.change-password-container[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{padding:.6rem 0;font-weight:500}@media (max-width: 768px){.change-password-container[_ngcontent-%COMP%]{padding:1.5rem}}.background-color[_ngcontent-%COMP%]{background-color:var(--primary-color-100)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,var(--primary-color-500),var(--primary-color-400));color:var(--primary-color-100);border:1px solid var(--primary-color-500)}"]})};export{z as ChangePasswordComponent};
